\documentclass{article}
\usepackage{titlesec}
\usepackage{colortbl}
\usepackage{tabularx}
\usepackage[utf8]{inputenc}

\title{Assignment T2. Peer-To-Peer Network Systems \\
\large TDT4190 - Distributed Systems, spring 2014}

\author{
    Sigve Sebastian Farstad \\
    Christoffer TÃ¸nnessen
}

\renewcommand\thesubsection{\alph{subsection})}
\newcommand{\question}[1]{\subsection{}\textit{#1}\bigskip}

\begin{document}

\maketitle

\section{Theory}

\question{In a distributed system with high churn, participating nodes leave and join the system all the times. Is peer-to-peer network or client-server best suited to withstand the high churn? Explain your answer.}

In a peer-to-peer network the role of every node is the same.
When there is a high churn, every node connects itself to others and it doesn't matter who.
This makes for an even distribution of the workload.
In a client-server network all nodes have to connect to the one server.
When a high churn occurs, the workload on the server will increase.
This means the server must spend more time on the nodes connecting and disconnecting.

A peer-to-peer network is therefor better than a clint-server network when there is a high churn.

\question{Why are searches in structured peer-to-peer networks limited to lookups on key (which is GUID), while searches in unstructured peer-to-peer network can be anything?}

In structured peer-to-peer networks, the network is organized into a specific topology.
Commonly, this topology is a type of DHT, or Distributed Hash Table.
As hash tables look up values based on a key, it follows naturally that most structured peer-to-peer networks are limited to lookups on keys.

Unstructured peer-to-peer networks, on the other hand, do not implement any efficient distrubuted global key lookup mechanism.
This means that searches in unstructured peer-to-peer networks need to flood through the network in order to reach as many nodes as possible.
Since key-based lookup provides no advantage in this case, searches might as well be anything.

\section{Practical}

\question{Takes as a starting point a Pastry Network with 12-bit GUID. Suppose there are 25 peers with the following GUIDs: F9C, F89, BFC, BA0, AAE, A7C, 7D9, 7D7, 7D5, 7D4, 4CC, 4CF, 4C1, 4A7, 48E, 39C, 33F, 371, 328, 1EC, 19E, 11E, 170, 129, 0FB. Create the routing tables of the nodes 4CC and 7D9. Each cell in the routing tables will contain either nothing or GUID of a node}

We choose $b = 2$ for this assignment. This means we need to change the numbers into base 4. The benefit of this is that we get a nice 3 by 3 table for the routing table.

The converted values are as follows:
\begin{table}[ht!]
    \begin{center}
    \begin{tabular}{| l | l |}
    \hline
    \bf{Hex}  & \bf{Base 4} \\
    \hline
    F9C         & 332130 \\
    \hline
    F89         & 332021 \\
    \hline
    BFC         & 233330 \\
    \hline
    BA0         & 232200 \\
    \hline
    AAE         & 222232 \\
    \hline
    A7C         & 221330 \\
    \hline
    7D9         & 133121 \\
    \hline
    7D7         & 133113 \\
    \hline
    7D5         & 133111 \\
    \hline
    7D4         & 133110 \\
    \hline
    4CC         & 103030 \\
    \hline
    4CF         & 103033 \\
    \hline
    4C1         & 103001 \\
    \hline
    4A7         & 102213 \\
    \hline
    48E         & 102032 \\
    \hline
    39C         & 032130 \\
    \hline
    33F         & 030333 \\
    \hline
    371         & 031301 \\
    \hline
    328         & 030220 \\
    \hline
    1EC         & 013230 \\
    \hline
    19E         & 012132 \\
    \hline
    11E         & 010132 \\
    \hline
    170         & 011300 \\
    \hline
    129         & 010221 \\
    \hline
    0FB         & 003323 \\
    \hline
    \end{tabular}
    \end{center}
\end{table}

\begin{table}[ht!]
    \begin{center}
        \begin{tabularx}{.75\textwidth}{| >{\centering} X | >{\centering} X | >{\centering\arraybackslash} X |}
    \hline
    \multicolumn{3}{|c|}{\textbf{Routing table for node 103030}} \\
    \hline
    -3-32130 & -3-32021 & -2-33330 \\
    \hline
    1-3-3121 & 1-3-3113 & 1-3-3111 \\
    \hline
    10-2-213 & 10-2-032 & \cellcolor[gray]{0.8} - \\
    \hline
    \end{tabularx}
    \end{center}
\end{table}

\begin{table}[ht!]
    \begin{center}
        \begin{tabularx}{.75\textwidth}{| >{\centering} X | >{\centering} X | >{\centering\arraybackslash} X |}
    \hline
    \multicolumn{3}{|c|}{\textbf{Routing table for node 133121}} \\
    \hline
    -0-30333 & -2-21330 & -3-32130 \\
    \hline
    1-0-2213 & 1-0-3030 & 1-0-2032 \\
    \hline
    \cellcolor[gray]{0.8} - & \cellcolor[gray]{0.8} - & \cellcolor[gray]{0.8} - \\
    \hline
    \end{tabularx}
    \end{center}
\end{table}

\question{Use the routing table from 2a) to show what happens if the node 7D9 wants to perform a lookup on the value 371. Explain what happens. Assume that each node has a leaf node table of size 2 - that is, each node in addition to the routing table only know about their nearest neighbors with higher GUID and nearest neighbor with lower GUID. Describe any other assumptions you make if any.}

\question{A node with GUID 0FC contacts node 7D9 with a desire to join the Pastry network. What happens?}

\question{A node has lost connectivity to the network (ie the node is "dead" and is no longer available). Describe the most important things that will now happen.}

\end{document}
